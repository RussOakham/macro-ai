{
	"openapi": "3.1.0",
	"info": {
		"title": "Macro AI Express API with Swagger",
		"version": "0.0.1",
		"description": "This is a simple CRUD API application made with Express and documented with Swagger",
		"license": {
			"name": "MIT",
			"url": "https://spdx.org/licenses/MIT.html"
		}
	},
	"servers": [
		{
			"url": "http://localhost:3030/api"
		}
	],
	"components": {
		"securitySchemes": {
			"cookieAuth": {
				"type": "apiKey",
				"in": "cookie",
				"name": "macro-ai-accessToken"
			},
			"apiKeyAuth": {
				"type": "apiKey",
				"in": "header",
				"name": "X-API-KEY"
			}
		},
		"schemas": {
			"GetUserResponse": {
				"type": "object",
				"required": ["id", "email", "emailVerified"],
				"properties": {
					"id": {
						"type": "string",
						"description": "User ID",
						"example": "user123"
					},
					"email": {
						"type": "string",
						"description": "User email",
						"example": "user@example.com"
					},
					"emailVerified": {
						"type": "boolean",
						"description": "Whether the user's email is verified",
						"example": true
					}
				}
			},
			"HealthResponse": {
				"type": "object",
				"properties": {
					"message": {
						"type": "string",
						"example": "Api Health Status: OK"
					}
				}
			},
			"Register": {
				"type": "object",
				"properties": {
					"email": {
						"type": "string"
					},
					"password": {
						"type": "string"
					}
				},
				"required": ["email", "password"]
			},
			"ConfirmRegistration": {
				"type": "object",
				"properties": {
					"username": {
						"type": "string"
					},
					"code": {
						"type": "number"
					}
				},
				"required": ["username", "code"]
			},
			"ResendConfirmationCode": {
				"type": "object",
				"properties": {
					"username": {
						"type": "string"
					}
				},
				"required": ["username"]
			},
			"Login": {
				"type": "object",
				"properties": {
					"email": {
						"type": "string",
						"description": "The user's email address.",
						"example": "user@example.com"
					},
					"password": {
						"type": "string",
						"description": "The user's password.",
						"example": "Password123"
					}
				},
				"required": ["email", "password"]
			},
			"Logout": {
				"type": "object",
				"properties": {
					"accessToken": {
						"type": "string"
					},
					"refreshToken": {
						"type": "string"
					}
				},
				"required": ["accessToken"]
			},
			"RefreshToken": {
				"type": "object",
				"properties": {
					"refreshToken": {
						"type": "string"
					}
				},
				"required": ["refreshToken"],
				"example": "8xLOxBtZp8"
			},
			"GetUser": {
				"type": "object",
				"properties": {
					"accessToken": {
						"type": "string"
					}
				},
				"required": ["accessToken"],
				"example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
			},
			"AuthResponse": {
				"type": "object",
				"properties": {
					"message": {
						"type": "string",
						"description": "Response message"
					},
					"user": {
						"type": "object",
						"properties": {
							"id": {
								"type": "string",
								"description": "User ID"
							},
							"email": {
								"type": "string",
								"description": "User email"
							}
						}
					},
					"tokens": {
						"type": "object",
						"properties": {
							"accessToken": {
								"type": "string",
								"description": "JWT access token"
							},
							"refreshToken": {
								"type": "string",
								"description": "JWT refresh token"
							}
						}
					}
				},
				"required": ["message"]
			},
			"ErrorResponse": {
				"type": "object",
				"properties": {
					"message": {
						"type": "string",
						"description": "Error message"
					},
					"details": {
						"type": "object",
						"description": "Additional error details (optional)"
					}
				}
			}
		},
		"responses": {
			"BadRequest": {
				"description": "Bad Request - The request was malformed or contains invalid parameters",
				"content": {
					"application/json": {
						"schema": {
							"type": "object",
							"properties": {
								"message": {
									"type": "string",
									"example": "Validation Failed"
								},
								"details": {
									"type": "object",
									"example": {
										"field": "Error details"
									}
								}
							}
						}
					}
				}
			},
			"Unauthorized": {
				"description": "Unauthorized - Authentication is required or has failed",
				"content": {
					"application/json": {
						"schema": {
							"type": "object",
							"properties": {
								"message": {
									"type": "string",
									"example": "Invalid credentials"
								}
							}
						}
					}
				}
			},
			"Forbidden": {
				"description": "Forbidden - The user does not have permission to access the resource",
				"content": {
					"application/json": {
						"schema": {
							"type": "object",
							"properties": {
								"message": {
									"type": "string",
									"example": "Access denied"
								}
							}
						}
					}
				}
			},
			"NotFound": {
				"description": "Not Found - The requested resource was not found",
				"content": {
					"application/json": {
						"schema": {
							"type": "object",
							"properties": {
								"message": {
									"type": "string",
									"example": "Resource not found"
								}
							}
						}
					}
				}
			},
			"ServerError": {
				"description": "Server Error - An unexpected error occurred on the server",
				"content": {
					"application/json": {
						"schema": {
							"type": "object",
							"properties": {
								"message": {
									"type": "string",
									"example": "Internal server error"
								},
								"details": {
									"type": "object",
									"example": {
										"error": "Error details"
									}
								}
							}
						}
					}
				}
			}
		}
	},
	"security": [
		{
			"cookieAuth": [],
			"apiKeyAuth": []
		}
	],
	"paths": {
		"/auth/register": {
			"post": {
				"tags": ["Authorization"],
				"summary": "Register a new user",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/Register"
							}
						}
					}
				},
				"responses": {
					"201": {
						"description": "User registered successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/AuthResponse"
								}
							}
						}
					},
					"400": {
						"description": "Validation error",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"409": {
						"description": "User already exists",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"500": {
						"description": "Internal server error",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/auth/confirm-registration": {
			"post": {
				"tags": ["Authorization"],
				"summary": "Confirm user registration with verification code",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/ConfirmRegistration"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Registration confirmed successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/AuthResponse"
								}
							}
						}
					},
					"400": {
						"description": "Invalid verification code",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"500": {
						"description": "Internal server error",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/auth/resend-confirmation-code": {
			"post": {
				"tags": ["Authorization"],
				"summary": "Resend confirmation code",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/ResendConfirmationCode"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Confirmation code resent successfully"
					},
					"400": {
						"description": "Bad request"
					},
					"500": {
						"description": "Internal server error"
					}
				}
			}
		},
		"/auth/login": {
			"post": {
				"tags": ["Authorization"],
				"summary": "Login user",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/Login"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Login successful",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Login successful"
										},
										"tokens": {
											"type": "object",
											"properties": {
												"accessToken": {
													"type": "string",
													"description": "JWT access token"
												},
												"refreshToken": {
													"type": "string",
													"description": "JWT refresh token"
												},
												"expiresIn": {
													"type": "number",
													"description": "Token expiration time in seconds"
												}
											}
										}
									}
								}
							}
						},
						"headers": {
							"Set-Cookie": {
								"schema": {
									"type": "string",
									"description": "Authentication cookies (accessToken, refreshToken)"
								}
							}
						}
					},
					"400": {
						"description": "Invalid credentials",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"401": {
						"description": "User not confirmed",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"500": {
						"description": "Internal server error",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/auth/logout": {
			"post": {
				"tags": ["Authorization"],
				"summary": "Logout user",
				"security": [
					{
						"cookieAuth": []
					}
				],
				"responses": {
					"200": {
						"description": "Logout successful",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Logout successful"
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized - No valid session",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"500": {
						"description": "Internal server error",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/auth/refresh": {
			"post": {
				"tags": ["Authorization"],
				"summary": "Refresh access token",
				"security": [
					{
						"cookieAuth": []
					}
				],
				"responses": {
					"200": {
						"description": "Tokens refreshed successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Tokens refreshed successfully"
										},
										"tokens": {
											"type": "object",
											"properties": {
												"accessToken": {
													"type": "string",
													"description": "New access token"
												},
												"refreshToken": {
													"type": "string",
													"description": "New refresh token"
												},
												"expiresIn": {
													"type": "number",
													"description": "Token expiration time in seconds"
												}
											}
										}
									}
								}
							}
						},
						"headers": {
							"Set-Cookie": {
								"schema": {
									"type": "string",
									"description": "Updated authentication cookies"
								}
							}
						}
					},
					"401": {
						"description": "Invalid or expired refresh token",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"500": {
						"description": "Internal server error",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/auth/user": {
			"get": {
				"tags": ["Authorization"],
				"summary": "Get user profile",
				"description": "Retrieves the authenticated user's profile information",
				"security": [
					{
						"cookieAuth": []
					}
				],
				"responses": {
					"200": {
						"description": "User profile retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/GetUserResponse"
								}
							}
						}
					},
					"206": {
						"description": "Partial Content - User profile incomplete",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized - Invalid or expired token",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"500": {
						"description": "Internal server error",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/auth/forgot-password": {
			"post": {
				"tags": ["Authorization"],
				"summary": "Request password reset",
				"description": "Sends a password reset code to the user's email",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"email": {
										"type": "string",
										"format": "email",
										"description": "User's email address",
										"example": "user@example.com"
									}
								},
								"required": ["email"]
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Password reset code sent successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Password reset code has been sent to your email"
										}
									}
								}
							}
						}
					},
					"400": {
						"$ref": "#/components/responses/BadRequest"
					},
					"404": {
						"$ref": "#/components/responses/NotFound"
					},
					"500": {
						"$ref": "#/components/responses/ServerError"
					}
				}
			}
		},
		"/auth/confirm-forgot-password": {
			"post": {
				"tags": ["Authorization"],
				"summary": "Confirm password reset",
				"description": "Resets the user's password using the confirmation code",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"email": {
										"type": "string",
										"format": "email",
										"description": "User's email address",
										"example": "user@example.com"
									},
									"code": {
										"type": "string",
										"description": "Password reset confirmation code",
										"example": "123456"
									},
									"newPassword": {
										"type": "string",
										"description": "New password",
										"example": "NewSecurePassword123!"
									},
									"confirmPassword": {
										"type": "string",
										"description": "Confirm new password",
										"example": "NewSecurePassword123!"
									}
								},
								"required": ["email", "code", "newPassword", "confirmPassword"]
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Password reset successful",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Password reset successfully"
										}
									}
								}
							}
						}
					},
					"400": {
						"$ref": "#/components/responses/BadRequest"
					},
					"404": {
						"$ref": "#/components/responses/NotFound"
					},
					"500": {
						"$ref": "#/components/responses/ServerError"
					}
				}
			}
		},
		"/health": {
			"get": {
				"tags": ["Utility"],
				"summary": "Check API health status",
				"description": "Returns the current health status of the API",
				"responses": {
					"200": {
						"description": "API is healthy",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/HealthResponse",
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Api Health Status: OK"
										}
									}
								}
							}
						}
					},
					"500": {
						"description": "API is unhealthy",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse",
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Api Status: Error"
										}
									}
								}
							}
						}
					}
				}
			}
		}
	},
	"tags": [
		{
			"name": "Utility",
			"description": "System utility endpoints"
		}
	]
}
