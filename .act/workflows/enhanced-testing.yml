# Configuration for enhanced-testing workflow
# This allows us to test specific jobs without external dependencies

# Skip jobs that require external services
skip-job:
  - 'Setup Test Matrix' # Requires GitHub repository context

# Override environment variables for this workflow
env:
  GITHUB_REPOSITORY: 'RussOakham/macro-ai'
  GITHUB_REF: 'refs/heads/feature/improve-testing-setup'
  GITHUB_HEAD_REF: 'feature/improve-testing-setup'
  GITHUB_BASE_REF: 'main'
  GITHUB_SHA: '1234567890abcdef'
  GITHUB_WORKSPACE: '/Users/russell.oakham/repos/personal/macro-ai'
  NODE_ENV: 'development'
  CI: 'true'

# Matrix configuration for testing specific packages
matrix:
  test-execution:
    - name: 'Unit Tests - API Client'
      package: 'packages/macro-ai-api-client'
      test-pattern: 'src/**/*.test.{ts,tsx}'
      exclude-pattern: '**/*.integration.test.*'
      timeout: 60000
      parallel: true
    - name: 'Unit Tests - Express API'
      package: 'apps/express-api'
      test-pattern: 'src/**/*.test.{ts,tsx}'
      exclude-pattern: '**/*.integration.test.*'
      timeout: 60000
      parallel: true
    - name: 'Unit Tests - Client UI'
      package: 'apps/client-ui'
      test-pattern: 'src/**/*.test.{ts,tsx}'
      exclude-pattern: '**/*.integration.test.*'
      timeout: 60000
      parallel: true
    - name: 'Integration Tests - Express API'
      package: 'apps/express-api'
      test-pattern: '**/*.integration.test.*'
      exclude-pattern: ''
      timeout: 120000
      parallel: false
